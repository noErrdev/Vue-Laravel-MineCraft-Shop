# L-Shop

<p align="center">
<img src ="http://i90.fastpic.ru/big/2017/0309/9c/1cebb8e0e70a432b71102bf20334459c.png">
</p>

## Современная торговая система для Minecraft.

##### L-Shop - это проект с открытым исходным кодом, целая система, призванная помочь администраторам игровых серверов Minecraft упростить процесс продажи виртуальных товаров.

## Разработчики
* **D3lph1** - Программный код.
* **WhileD0S** - Дизайн и верстка.

## Системные требования
* PHP >= 5.6.4
* OpenSSL PHP Extension
* PDO PHP Extension
* Mbstring PHP Extension
* Tokenizer PHP Extension
* XML PHP Extension
* GD Library

> Система базируется на фреймворке **Laravel** (Версия 5.4.24).

## Почему L-Shop?
* Полная адаптивность. Даже на маленьких экранах использовать магазин удобно
* Регистрация, авторизация.
* Подтверждени регистрации через Email. Включается в настройках.
* Сам магазин ассинхронен чуть менее, чем полностью.
* Продажа внутриигровых блоков, предметов, привилегей.
* Выдача товаров происходит по средствам плагина shopping cart reloaded.
* Интеграция с платежным агрегатором robokassa.
* Мультисерверность.
* Разделение товаров на каждом сервере по категориям.
* Новостная система.
* Статические страницы.
* Поддержка Sashok724's Launcher'а. UUID.
* Скин система. Возможность устанавливать скины и плащи, в том числе и в HD.
* Мониторинг серверов по средствам RCON.
* 3 основных режима работы: покупки могут совершать только гости .(неавторизованные пользователи); только авторизованные пользователи; и те и те.
* 2 вида оформления заказа: быстрая покупка из каталога и покупка после наполнения корзины.
* Пополнения баланса пользователя.
* Просмотр внутриигровой корзины.
* Просмотр истории платежей.
* Разделение на предметы и товары.
* Защита от перебора паролей по средствам "заморозки" пользователя на некоторое время.
* Защита форм reCAPTCHA'ой.
* Управление некоторым функционалом магазина как из панели администратора, так и из CLI.
* Встроенный API для интеграции магазина с различными cms.
* RCON консоль.
* Система собирает и формирует статистику продаж, прибыли.

### Установка
1) Установить менеджер зависимостей composer (https://getcomposer.org/).
2) Скачать архив с https://github.com/D3lph1/L-shop и распаковать его в любое удобно место на сервере.
3) Перейти в директорию с распакованным L-Shop и выполнить команду composer install. Дождаться окончания процедуры установки зависимостей (Файлов много и весят они не мало (Для сайта), поэтому скачивание может быть продолжительным).
4) Достать дамп таблиц из папки database/dump. Произвести импорт файла в БД.
5) Переименовать файл .env.example в .env
6) Открыть файл .env и произвести настройку:
+ APP_NAME - Имя приложения.
+ APP_URL - Адрес сайта

+ DB_HOST - Адрес сервера базы данных.
+ DB_PORT - Порт сервера базы данных.
+ DB_USERNAME - Имя пользователя базы данных.
+ DB_PASSWORD - Пароль пользователя базы данных.
+ DB_PREFIX - Префикс таблиц. Если не знаете что это, оставьте как есть.

+ MAIL_HOST - Адрес почтового сервера *.
+ MAIL_PORT - Порт почтового серевра.
+ MAIL_USERNAME - Имя пользователя почты.
+ MAIL_PASSWORD - Пароль пользователя почты.
+ MAIL_ENCRYPTION - Алгоритм шифрования соединения (Доступны: ssl, tls. Второй предпочтительней).
+ MAIL_FROM_ADDRESS - Адрес автора писем.
+ MAIL_FROM_NAME - Имя автора писем.

* Я рекомендую использовать gmail в качестве сервиса. С ним у меня не было никаких проблем (Единственное что нужно сделать, это установить чекбокс на этой странице: https://myaccount.google.com/lesssecureapps).
7) Создать нового пользователя. Сделать это можно командой "php artisan user:create username email@gmail.com password123 --activate --admin", где username - имя пользователя, email@gmail.com - email пользователя, password123 - пароль. В l-shop уже зарегистрирован администратор, вы можете войти под его аккаунтом (Имя пользователя: admin пароль: admin). Не забудьте потом удалить его или изменить данные.
8) Перейти в Администрирование > Управление > Безопасность и выполнить то, что там написано в разделе "Генератор ключей".
10) Перейти в Администрирование > Управление > Безопасность и указать ключи RECAPTCHA.
11) Перейти в Администрирование > Управление > Платежи и указать данные от сервиса ROBOKASSA.
12) Перейти в Администрирование > Управление > Оптимизация и обновить кэш маршрутов и конфигов. Это должно положительно сказаться на производительности приложения.

Информация для robokassa:
Result URL: http://example.ru/payment/result/robokassa
Success Url: http://example.ru/payment/success/robokassa
Fail Url: http://example.ru/payment/error/robokassa
Метод отсылки данных: любой.​

Если вы планируете использовать API L-Shop обязательно смените секретный ключ. Сделать это можно в разделе Администрирование > Управление > API.

После проделанных операций, рекомендуем установить Directory root вашего веб-сервера в папку public.

### Скриншоты

![Signin page](http://i89.fastpic.ru/big/2017/0427/66/4cb0664b14df09d07c68c6446ecdfa66.png)
![Servers page](http://i89.fastpic.ru/big/2017/0427/1e/f8a97b0b74ee755ffee412076c7d961e.png)
![Catalog](http://i89.fastpic.ru/big/2017/0427/27/73b1683032711c4f0b3471757ae51827.png)
![Mobile sidebar](http://i89.fastpic.ru/big/2017/0427/25/717c52ec04553c1e8fc284e0877f7125.png)
![Cart](http://i89.fastpic.ru/big/2017/0427/b6/0676983bf0673e2ec8f19c9813493ab6.png)
![Skin system](http://i95.fastpic.ru/big/2017/0625/30/907dfb1574909776398158f73e164e30.png)
![Monitoring](http://i95.fastpic.ru/big/2017/0625/ab/814e55e205411f935b4b6412189e1fab.png)
![Admin settings](http://i95.fastpic.ru/big/2017/0625/d7/d70188cfcee99a7df9415aca3063c2d7.png)
![Admin add item](http://i89.fastpic.ru/big/2017/0427/10/74a3155ef353dfc5d9d531139db8b710.png)
![Admin statistic page](http://i95.fastpic.ru/big/2017/0714/80/6d78aeacc7a0bd185ce5661139b9b780.png)
